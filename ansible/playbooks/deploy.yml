---
- hosts: web
  gather_facts: yes
  become: yes

  vars:
    docker_tag: latest
    docker_image: "wordpress:{{ docker_tag }}"

    dockerhub_username: sp00nfeeder

    dockerhub_password: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      64656562623736656235323735616162636432343633336166363039303335313534643965373031
      6434343465613863653239623433316465333532653633350a356234396635333430386462323764
      39316133303664356266303839386563333863613434393737363566633064633335343434316231
      3131336632353730360a353263623565633239646533323537306332656165323136346630633463
      65376362366665636165343361333230326461333564316431336334363931386532613336353238
      34323233316164646230663365626636666163373566336434373734346130363031326234663238
      63303933323731343333363731363938626637653731393863633665346663393933653634396630
      36376431333234343535
          
    wordpressdb_user: wordpress

    wordpressdb_password: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      35323238363431663833356436396236393161386161373366313562313831643234316566323734
      3634313737363132306537383031663735646165303538650a323436303339393864633537636263
      61643164316562656163336334366263653036336661666662653836336331306238333863363538
      3066316461666363340a363762306539316136303461383763656139333830363234383865363963
      31323165633039633738313833646362313034363861613137393934366530303164383161626663
      6533633061306166343737303037343238363733623963373432

    wordpressdb_name: wordpressdb

  roles:
    - geerlingguy.docker
    - chaolopezpa.wordpress

  pre_tasks:
    - apt:
        update_cache: yes

  tasks:
    - name: install python3 pip
      apt:
        name: python3-pip 
        update_cache: yes 

    - pip:
        name: "{{ item }}"
      loop:
        - docker
        - docker-compose
